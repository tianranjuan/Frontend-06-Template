# 初始化与构建 | 初始化工具 Yeoman（一）

**yeoman**

Yeoman 是现代化前端项目的脚手架工具，用于生成包含指定框架结构的工程化目录结构。

yeoman 在生成脚手架模板项目的时候应用很广泛，在开发 vscode 插件的时候就需要用到 yeoman 来生成模板。

**奇怪的语法**

yeoman 会按顺序执行导出 class 中的方法，所以开发时方法的书写顺序就变的比较重要。

**自己坑自己**

yeoman 的目录结构一定要严格的按照官网上的标准结构来，在开始的时候发现 link 完无论怎么运行 `yo tool` 都会报错说找不到同名的 ganerator，后来仔细对比后发现是因为 app 目录顺手达成了 apps，本以为这样没有问题，一直也没有考虑，坑了自己半天，切记，切记！

# 初始化与构建 | 初始化工具 Yeoman（二）

**使用异步函数**

yeoman 可以直接使用 es6 中的 async 和 await 语法来开发

**使用命令行交互**

在 yeoman 中提供了基础设施 `this.prompt` 函数来实现，它接收一个数组作为参数，其中可以定义交互的方式（如输入、询问等）和参数名等 schema 信息。

**文件模板系统**

脚手架最后的目的就是按照模板输出出最终的成品代码框架，此时就可以使用到 yeoman 的文件模板系统了，模板定义在 app 下的 templates 文件夹下，调用流程为：

1. 使用 this.templatePath 获取模板；
2. 使用 this.destinationPath 设置输出的位置；
3. 使用 this.fs.copyTpl 进行模板的拷贝和设置，接收三个参数：[使用 1.获取到的模板内容, 设置好的输出路径， 填充模板内容的 json 数据]。

> 填充模板内容的 json 的常见来源是用户根据命令行交互输入的参数。

**npm 依赖管理**

yeoman 对 npm 进行了包装，所以在 yeoman 中可以通过函数调用的方式等效的使用 npm 进行依赖的安装和管理。

> 当然对 Yarn 和 Bower 也有对应的封装，在使用方式上是保持一致的。

使用的场景是在配置完脚手架后，可能会配置了一些 npm 的依赖，然后在生成脚手架后一起把依赖写入到脚手架中并安装，非常的方便，例如 Vue 的 Vue-cli 就可以在配置好 npm 依赖后一次性的生成脚手架。

使用方法有两种是：

第一种：直接合并 package.json，然后调用`this.npmInstall`（等效于使用了`npm install`命令）；
第二种：调用 install(`this.npmInstall(['lodash'], { 'save-dev': true });`)指定安装依赖。

# 初始化与构建 | Webpack 基本知识 、 Babel 基本知识

webpack 和 babel 以前有学习过一些，所以不在重复的记笔记了，当做一份[笔记](./webpack笔记.md)参考上传方便复习用。

**webpack 的设计初衷**

这里纠正了一个错误的认识，一直以来以为 webpack 是由于工程化的推广的诞生的一款打包工具，然而实际的 webpack 的初衷是为 nodejs 所设计的，即将 nodejs 环境下编写的代码打包成一个浏览器可用的代码，在清楚了这个问题后对于一些在浏览器端开发时 webpack 产生的一些瑕疵就可以理解！！！